(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/tabar/shopcart"],{"3d07":function(t,e,n){"use strict";(function(t){n("9f40");i(n("66fd"));var e=i(n("b1d4"));function i(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,n("543d")["createPage"])},"4ff3":function(t,e,n){"use strict";(function(t){function n(t,e){var n;if("undefined"===typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=i(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var o=0,r=function(){};return{s:r,n:function(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,u=!0,c=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return u=t.done,t},e:function(t){c=!0,a=t},f:function(){try{u||null==n.return||n.return()}finally{if(c)throw a}}}}function i(t,e){if(t){if("string"===typeof t)return o(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(t,e):void 0}}function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=getApp().globalData,a=r.imgRemote,u={data:function(){return{background:{backgroundColor:"#386FF0"},color:{color:"white"},imgRemote:a,edit:!0,page:1,cartitem:[],itemList:[],settlement:!1,allCheck:!1,recommendList:!1,totalPrice:"",feeInfo:""}},methods:{checkboxGroupChange:function(t){this.calculate()},calculate:function(){var t,e=0,i=n(this.itemList);try{for(i.s();!(t=i.n()).done;){var o=t.value;o.checked&&(e+=o.buy_num*o.sku.market_price)}}catch(r){i.e(r)}finally{i.f()}return this.totalPrice=e,this.totalPrice},delterGood:function(){var e=this;e.settlement?e.$showModal("确定要删除选中商品吗？",(function(){var i,o="",r=n(e.itemList);try{for(r.s();!(i=r.n()).done;){var a=i.value;1==a.checked&&(o+=a.id+",")}}catch(s){r.e(s)}finally{r.f()}var u=o.substring(0,o.length-1),c={token:t.getStorageSync("userToken"),cart_id:u};e.$get(e.$api.cartdel_cart,c,(function(t){var n=t.data;1==n.code?(e.$Toast("删除成功"),e.cartIndex()):e.$Toast(n.msg)}))})):0==e.itemList.length?e.$Toast("购物车暂时无商品"):e.$Toast("没有选中商品哦")},selectCheck:function(t){t>=0&&(this.itemList[t].checked=!this.itemList[t].checked,1!=this.itemList[t].status&&1==this.edit&&(this.itemList[t].checked=!1)),this.settlement=this.itemList.some((function(t){return 1==t.checked})),this.allCheck=this.itemList.every((function(t){return 1==t.checked})),this.calculate()},allCheckGood:function(){var t=this;this.allCheck=!this.allCheck,this.itemList.map((function(e){return 1==t.edit&&1!=e.status?e.checked=!1:e.checked=t.allCheck,e})),this.selectCheck()},shoplist:function(){if(this.settlement){var e=this.itemList.filter((function(t){return 1==t.checked}));t.setStorageSync("selectGoods",e),t.navigateTo({url:"/pages/shopcart/shoplist"})}else this.$Toast("没有选中商品哦")},cartIndex:function(){var e=this;this.$get(this.$api.cartIndex,{token:t.getStorageSync("userInfo")},(function(t){var n=t.data;0==n.code&&(n.data.map((function(t){return t.checked=!1,1!=t.status&&(t.checked=!1),t})),e.itemList=n.data,e.calculate())}))},likeGood:function(){var t=this;this.num,this.page;this.$get(this.$api.goodsUser_like,{},(function(e){var n=e.data;1==n.code&&(t.recommendList=n.data)}))},updateCart:function(e,n){var i=this,o={token:t.getStorageSync("userToken"),cart_id:e,buy_num:n};this.$get(this.$api.update_cart_num,o,(function(t){var e=t.data;1==e.code?(i.$Toast("成功更新购物车数量"),i.calculate()):i.$Toast(e.msg)}))},plus:function(t){1==this.itemList[t].status&&this.itemList[t].buy_num++;var e=this.itemList[t];this.updateCart(e.id,e.buy_num)},input:function(t){t.value?this.itemList[t.index].buy_num=t.value:this.itemList[t.index].buy_num=parseFloat(0);var e=this.itemList[t.index];this.updateCart(e.id,e.buy_num)},minus:function(t){1==this.itemList[t].status&&(1==this.itemList[t].buy_num?this.itemList[t].buy_num=1:this.itemList[t].buy_num--);var e=this.itemList[t];this.updateCart(e.id,e.buy_num)},getFreight:function(){var t=this;this.$get(this.$api.mainFreight,{},(function(e){var n=e.data;1==n.code&&(t.feeInfo=n.data)}))}},onShow:function(){this.edit=!0,this.allCheck=!1,this.settlement=!1,this.getFreight(),t.getStorageSync("userToken")?this.cartIndex():(getApp().globalData.isReload=!0,t.reLaunch({url:"../account/login"})),this.likeGood()},onLoad:function(){}};e.default=u}).call(this,n("543d")["default"])},"682c":function(t,e,n){},"69ff":function(t,e,n){"use strict";n.r(e);var i=n("4ff3"),o=n.n(i);for(var r in i)"default"!==r&&function(t){n.d(e,t,(function(){return i[t]}))}(r);e["default"]=o.a},"75f1":function(t,e,n){"use strict";var i=n("682c"),o=n.n(i);o.a},b1d4:function(t,e,n){"use strict";n.r(e);var i=n("e866"),o=n("69ff");for(var r in o)"default"!==r&&function(t){n.d(e,t,(function(){return o[t]}))}(r);n("75f1");var a,u=n("f0c5"),c=Object(u["a"])(o["default"],i["b"],i["c"],!1,null,"026dd0fc",null,!1,i["a"],a);e["default"]=c.exports},e866:function(t,e,n){"use strict";n.d(e,"b",(function(){return o})),n.d(e,"c",(function(){return r})),n.d(e,"a",(function(){return i}));var i={uNavbar:function(){return n.e("uview-ui/components/u-navbar/u-navbar").then(n.bind(null,"b7c6"))},uCheckboxGroup:function(){return Promise.all([n.e("common/vendor"),n.e("uview-ui/components/u-checkbox-group/u-checkbox-group")]).then(n.bind(null,"9ae1"))},uCheckbox:function(){return n.e("uview-ui/components/u-checkbox/u-checkbox").then(n.bind(null,"7b50"))},uNumberBox:function(){return n.e("uview-ui/components/u-number-box/u-number-box").then(n.bind(null,"d98e"))},myRecommend:function(){return n.e("components/recommend/index").then(n.bind(null,"06ee"))}},o=function(){var t=this,e=t.$createElement,n=(t._self._c,0!=t.itemList.length?t.$fixed(t.totalPrice):null);t.$mp.data=Object.assign({},{$root:{m0:n}})},r=[]}},[["3d07","common/runtime","common/vendor"]]]);